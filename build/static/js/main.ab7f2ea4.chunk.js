(this["webpackJsonposa2.6-2.10"]=this["webpackJsonposa2.6-2.10"]||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),u=t(14),a=t.n(u),o=t(3),i=function(e){return Object(c.jsxs)("p",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:e.remove,children:"remove"})]})},s=function(e){return Object(c.jsxs)("div",{children:["filter: ",Object(c.jsx)("input",{value:e.filter,onChange:e.handler})]})},l=function(e){return Object(c.jsxs)("form",{onSubmit:e.submit,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.name,onChange:e.handleName})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.number,onChange:e.handleNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},d=t(4),f=t.n(d),m="api/Persons",b={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},j=function(e){var n=e.message;return null===n?null:n.type?Object(c.jsx)("div",{className:"error",children:n.content}):Object(c.jsx)("div",{className:"error2",children:n.content})},h=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],a=Object(r.useState)(""),d=Object(o.a)(a,2),f=d[0],m=d[1],h=Object(r.useState)(""),O=Object(o.a)(h,2),v=O[0],p=O[1],x=Object(r.useState)(""),g=Object(o.a)(x,2),w=g[0],y=g[1],N=Object(r.useState)(null),C=Object(o.a)(N,2),S=C[0],T=C[1];Object(r.useEffect)((function(){b.getAll().then((function(e){u(e)}))}),[]);var k=t.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(s,{filter:w,handler:function(e){y(e.target.value)}}),Object(c.jsx)("h2",{children:"Add A Number"}),Object(c.jsx)(j,{message:S}),Object(c.jsx)(l,{submit:function(e){e.preventDefault();var n={name:f,number:v},c=t.map((function(e){return e.name}));if(""===f)m(""),p("");else if(c.includes(f))if(window.confirm("Do you want to update the number of ".concat(f,"?"))){var r=t.find((function(e){return e.name===f})).id;b.update(r,n).then((function(e){m(""),p(""),u(t.map((function(n){return n.id!==r?n:e}))),T({content:"The number of ".concat(e.name," was updated"),type:!0}),setTimeout((function(){T(null)}),2e3)})).catch((function(e){T({content:"".concat(f," has already been removed from server"),type:!1}),setTimeout((function(){T(null)}),2e3)}))}else m(""),p("");else b.create(n).then((function(e){p(""),m(""),u(t.concat(e)),T({content:"".concat(e.name," was added"),type:!0}),setTimeout((function(){T(null)}),2e3)})).catch((function(e){T({content:e,type:!0}),setTimeout((function(){T(null)}),2e3)}))},name:f,handleName:function(e){m(e.target.value)},number:v,handleNumber:function(e){p(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:k.map((function(e){return Object(c.jsx)(i,{name:e.name,number:e.number,remove:function(){return n=e.id,void(window.confirm("You for real wanna delete this guy?")&&b.remove(n).then((function(e){var c=t.find((function(e){return e.id===n})).name;T({content:"".concat(c," was removed"),type:!0}),setTimeout((function(){T(null)}),2e3),u(t.filter((function(e){return e.id!==n})))})));var n}},e.name)}))})]})};t(37);a.a.render(Object(c.jsx)(h,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ab7f2ea4.chunk.js.map